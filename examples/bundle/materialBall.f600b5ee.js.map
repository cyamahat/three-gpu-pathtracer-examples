{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAM,UAAU;AAEhB,IAAI,YAAY,UAAU,UAAU,aAAa;AACjD,IAAI,QAAQ,OAAO;AAEnB,MAAM,SAAS;IAEd,oBAAoB;QACnB,OAAO;QACP,UAAU;QACV,mBAAmB;QACnB,WAAW;QACX,WAAW;QACX,KAAK;QACL,cAAc;QACd,UAAU;QACV,kBAAkB;QAClB,qBAAqB;QACrB,SAAS;QACT,WAAW;QACX,oBAAoB;QACpB,YAAY;QACZ,gBAAgB;QAChB,aAAa;QACb,gBAAgB;QAChB,sBAAsB;QACtB,eAAe;QACf,mBAAmB;QACnB,OAAO;QACP,aAAa;QACb,YAAY;IACb;IAEA,4BAA4B;IAC5B,gBAAgB;IAChB,cAAc;IACd,kBAAkB;IAClB,eAAe;IACf,SAAS;IACT,aAAa,IAAI,OAAO,gBAAgB;IACxC,qBAAqB;IACrB,oBAAoB;IACpB,OAAO;AACR;AAEA,IAAK,OAAO,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAE,iBAAmB;IAEtD,OAAO,kBAAkB,CAAC,SAAS,GAAG;IACtC,OAAO,kBAAkB,CAAC,SAAS,GAAG;IACtC,OAAO,kBAAkB,CAAC,YAAY,GAAG;IACzC,OAAO,kBAAkB,CAAC,KAAK,GAAG;IAElC,OAAO,OAAO,GAAG;IACjB,OAAO,KAAK,GAAG;AAEhB,OAAO,IAAK,OAAO,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAE,eAAiB;IAE3D,OAAO,kBAAkB,CAAC,KAAK,GAAG;IAClC,OAAO,kBAAkB,CAAC,SAAS,GAAG;IACtC,OAAO,kBAAkB,CAAC,SAAS,GAAG;IACtC,OAAO,kBAAkB,CAAC,WAAW,GAAG;IACxC,OAAO,kBAAkB,CAAC,cAAc,GAAG;AAE5C,OAAO,IAAK,OAAO,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAE,YAAc;IAExD,OAAO,kBAAkB,CAAC,KAAK,GAAG;IAClC,OAAO,kBAAkB,CAAC,SAAS,GAAG;IACtC,OAAO,kBAAkB,CAAC,SAAS,GAAG;IACtC,OAAO,kBAAkB,CAAC,YAAY,GAAG;IACzC,OAAO,kBAAkB,CAAC,mBAAmB,GAAG;IAChD,OAAO,kBAAkB,CAAC,gBAAgB,GAAG;IAE7C,OAAO,OAAO,GAAG;IACjB,OAAO,KAAK,GAAG;AAEhB;AAEA,2CAA2C;AAC3C,MAAM,cAAc,OAAO,UAAU,GAAG,OAAO,WAAW;AAC1D,IAAK,cAAc,MAAO;IAEzB,OAAO,OAAO,GAAG,KAAK,GAAG,CAAE,OAAO,OAAO,EAAE;IAC3C,OAAO,WAAW,IAAI;IACtB,OAAO,KAAK,GAAG;IACf,OAAO,0BAA0B,GAAG;AAErC;AAEA;AAEA,eAAe;IAEd,CAAA,GAAA,oDAAwB,AAAD,EAAE,IAAI;IAE7B,SAAS,IAAI,CAAA,GAAA,8BAAa,AAAD;IACzB,OAAO,MAAM,CAAE,SAAS,IAAI;IAE5B,WAAW;IACX,WAAW,IAAI,CAAA,GAAA,oBAAa,AAAD,EAAG;QAAE,WAAW;IAAK;IAChD,SAAS,WAAW,GAAG,CAAA,GAAA,4BAAqB,AAAD;IAC3C,SAAS,mBAAmB,GAAG;IAC/B,SAAS,IAAI,CAAC,WAAW,CAAE,SAAS,UAAU;IAE9C,cAAc;IACd,aAAa,IAAI,CAAA,GAAA,wBAAe,AAAD,EAAG;IAClC,WAAW,KAAK,CAAC,GAAG,CAAE,OAAO,KAAK,EAAE,OAAO,KAAK;IAChD,WAAW,WAAW,CAAC,GAAG,CAAE,MAAM;IAClC,WAAW,sBAAsB,GAAG,CAAE,QAAQ,UAAU;QAEvD,YAAY,QAAQ,CAAC,KAAK,GAAG,OAAO,YAAY;QAChD,YAAY,QAAQ,CAAC,SAAS,GAAG,OAAO,gBAAgB;QACxD,YAAY,QAAQ,CAAC,MAAM,GAAG,OAAO,aAAa;QAClD,YAAY,QAAQ,CAAC,OAAO,GAAG,KAAK,QAAQ,CAAC,OAAO;QAEpD,MAAM,YAAY,SAAS,SAAS;QACpC,MAAM,YAAY,OAAO,cAAc,GAAG,cAAc;QACxD,SAAS,SAAS,GAAG;QACrB,UAAU,QAAQ,CAAC,GAAG,GAAG,OAAO,OAAO;QACvC,UAAU,MAAM,CAAE;QAClB,SAAS,SAAS,GAAG;IAEtB;IAEA,WAAW;IACX,cAAc,IAAI,CAAA,GAAA,sBAAc,AAAD,EAAG,IAAI,CAAA,GAAA,wBAAe,AAAD,EAAG;QACtD,KAAK;QACL,UAAU,CAAA,GAAA,qBAAc,AAAD;QACvB,oBAAoB,SAAS,oBAAoB,GAAG,kBAAkB;IACvE;IAEA,QAAQ,IAAI,CAAA,GAAA,YAAK,AAAD;IAEhB,OAAO,KAAK,GAAG;IAEf,cAAc;IACd,MAAM,MAAM,MAAM,IAAI,CAAA,GAAA,gDAAsB,AAAD,IAAI,SAAS;IAExD,uBAAuB;IACvB,MAAM,GAAG,CAAE,IAAI,KAAK;IACpB,SAAS,IAAI,MAAM;IACnB,WAAW,IAAI,QAAQ;IAEvB,2BAA2B;IAC3B,MAAM,MAAM,CAAE;IACd,OAAO,gBAAgB;IAEvB,WAAW;IACX,WAAW,IAAI,CAAA,GAAA,8BAAa,AAAD,EAAG,QAAQ,SAAS,UAAU;IACzD,SAAS,gBAAgB,CAAE,UAAU,IAAM,WAAW,YAAY;IAElE,eAAe;IACf,MAAM,MAAM,IAAI,CAAA,GAAA,cAAO,AAAD,EAAG,GAAG,GAAG,IAAM,kBAAkB,CAAE,OAAO,WAAW,EAAG,SAAS;IACvF,SAAS,MAAM,CAAC,IAAI,CAAE,OAAO,QAAQ,EAAG,eAAe,CAAE,KAAK;IAC9D,SAAS,MAAM;IAEf,OAAO,aAAa,CAAE;IACtB,OAAO,UAAU,CAAE;IAEnB;IACA;IACA,OAAO,gBAAgB,CAAE,UAAU;IAEnC,MAAM;IACN,MAAM,MAAM,IAAI,CAAA,GAAA,sBAAG,AAAD;IAClB,MAAM,WAAW,IAAI,SAAS,CAAE;IAChC,SAAS,GAAG,CAAE,QAAQ,8BAA+B,QAAQ,CAAE;IAC/D,SAAS,GAAG,CAAE,QAAQ,SAAS,GAAG,GAAG,GAAI,QAAQ,CAAE,CAAA;QAElD,WAAW,KAAK,CAAC,GAAG,CAAE,OAAO;IAE9B;IACA,SAAS,GAAG,CAAE,QAAQ,sBAAsB,GAAG,GAAI,QAAQ,CAAE;IAC7D,SAAS,GAAG,CAAE,QAAQ,WAAW,GAAG,IAAI,GAAI,QAAQ,CAAE;IACtD,SAAS,GAAG,CAAE,QAAQ,uBAAuB,GAAG,IAAI,GAAI,QAAQ,CAAE;IAClE,SAAS,GAAG,CAAE,QAAQ,eAAe,KAAK,GAAI,QAAQ,CAAE;IAExD,MAAM,gBAAgB,IAAI,SAAS,CAAE;IACrC,cAAc,GAAG,CAAE,QAAQ;IAC3B,cAAc,GAAG,CAAE,QAAQ,gBAAgB,MAAM;IACjD,cAAc,GAAG,CAAE,QAAQ,oBAAoB,MAAM;IACrD,cAAc,GAAG,CAAE,QAAQ,iBAAiB,KAAK;IACjD,cAAc,KAAK;IAEnB,MAAM,aAAa,IAAI,SAAS,CAAE;IAClC,WAAW,QAAQ,CAAE,OAAO,kBAAkB,EAAE,SAAU,QAAQ,CAAE;IACpE,WAAW,QAAQ,CAAE,OAAO,kBAAkB,EAAE,YAAa,QAAQ,CAAE;IACvE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,qBAAqB,KAAK,MAAM,MAAO,QAAQ,CAAE;IAC5F,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,aAAa,GAAG,GAAI,QAAQ,CAAE;IACzE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,aAAa,GAAG,GAAI,QAAQ,CAAE;IACzE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,WAAW,GAAG,GAAI,QAAQ,CAAE;IACvE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,gBAAgB,GAAG,GAAI,QAAQ,CAAE;IAC5E,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,YAAY,GAAG,GAAI,QAAQ,CAAE;IACxE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,uBAAuB,MAAM,KAAM,QAAQ,CAAE;IACxF,WAAW,QAAQ,CAAE,OAAO,kBAAkB,EAAE,oBAAqB,QAAQ,CAAE;IAC/E,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,OAAO,KAAK,KAAM,QAAQ,CAAE;IACvE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,aAAa,GAAG,GAAI,QAAQ,CAAE;IACzE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,sBAAsB,GAAG,GAAI,QAAQ,CAAE;IAClF,WAAW,QAAQ,CAAE,OAAO,kBAAkB,EAAE,cAAe,QAAQ,CAAE;IACzE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,kBAAkB,GAAG,GAAI,QAAQ,CAAE;IAC9E,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,eAAe,KAAK,KAAM,QAAQ,CAAE;IAC/E,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,kBAAkB,KAAK,KAAM,QAAQ,CAAE;IAClF,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,wBAAwB,KAAK,QAAS,QAAQ,CAAE;IAC3F,WAAW,QAAQ,CAAE,OAAO,kBAAkB,EAAE,iBAAkB,QAAQ,CAAE;IAC5E,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,qBAAqB,KAAK,KAAM,QAAQ,CAAE;IACrF,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,SAAU,QAAQ,CAAE;IAC/D,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,eAAgB,QAAQ,CAAE;IACrE,WAAW,GAAG,CAAE,OAAO,kBAAkB,EAAE,cAAe,QAAQ,CAAE;IACpE,WAAW,KAAK;IAEhB;AAED;AAEA,SAAS;IAER,SAAS,OAAO,CAAE,OAAO,UAAU,EAAE,OAAO,WAAW;IACvD,SAAS,aAAa,CAAE,OAAO,gBAAgB;IAC/C,OAAO,MAAM,GAAG,OAAO,UAAU,GAAG,OAAO,WAAW;IACtD,OAAO,sBAAsB;IAC7B,WAAW,YAAY;AAExB;AAEA,SAAS;IAER,MAAM,qBAAqB,OAAO,kBAAkB;IACpD,SAAS,KAAK,CAAC,GAAG,CAAE,mBAAmB,KAAK;IAC5C,SAAS,QAAQ,CAAC,GAAG,CAAE,mBAAmB,QAAQ;IAClD,SAAS,iBAAiB,GAAG,mBAAmB,iBAAiB;IACjE,SAAS,SAAS,GAAG,mBAAmB,SAAS;IACjD,SAAS,SAAS,GAAG,mBAAmB,SAAS;IACjD,SAAS,YAAY,GAAG,mBAAmB,YAAY;IACvD,SAAS,mBAAmB,GAAG,mBAAmB,QAAQ,GAAG,WAAW,mBAAmB,mBAAmB;IAC9G,SAAS,gBAAgB,CAAC,GAAG,CAAE,mBAAmB,gBAAgB;IAClE,SAAS,GAAG,GAAG,mBAAmB,GAAG;IACrC,SAAS,OAAO,GAAG,mBAAmB,OAAO;IAC7C,SAAS,SAAS,GAAG,mBAAmB,SAAS;IACjD,SAAS,kBAAkB,GAAG,mBAAmB,kBAAkB;IACnE,SAAS,UAAU,CAAC,GAAG,CAAE,mBAAmB,UAAU;IACtD,SAAS,cAAc,GAAG,mBAAmB,cAAc;IAC3D,SAAS,WAAW,GAAG,mBAAmB,WAAW;IACrD,SAAS,cAAc,GAAG,mBAAmB,cAAc;IAC3D,SAAS,yBAAyB,GAAG;QAAE;QAAG,mBAAmB,oBAAoB;KAAE;IACnF,SAAS,aAAa,CAAC,GAAG,CAAE,mBAAmB,aAAa;IAC5D,SAAS,iBAAiB,GAAG,mBAAmB,iBAAiB;IACjE,SAAS,WAAW,GAAG,SAAS,OAAO,GAAG;IAC1C,SAAS,WAAW,GAAG,mBAAmB,WAAW;IAErD,WAAW,mBAAmB,GAAG,OAAO,mBAAmB;IAC3D,WAAW,0BAA0B,GAAG,OAAO,0BAA0B;IACzE,WAAW,kBAAkB,GAAG,OAAO,kBAAkB;IACzD,WAAW,OAAO,GAAG,OAAO,OAAO;IACnC,WAAW,WAAW,GAAG,OAAO,WAAW;IAE3C,0BAA0B;IAC1B,SAAS,KAAK,GAAG,mBAAmB,KAAK;IACzC,SAAS,UAAU,GAAG,mBAAmB,UAAU;IAEnD,WAAW,eAAe;IAC1B,WAAW,QAAQ,CAAE,OAAO;AAE7B;AAEA,SAAS;IAER,sBAAuB;IACvB,WAAW,YAAY;IACvB,OAAO,UAAU,CAAE,WAAW,OAAO,EAAE,WAAW,WAAW;AAE9D;;;;;ACrNA,mDAAa;AAvEb,IAAI;AACJ,SAAS;IAER,IAAK,eAEJ;IAID,gBAAgB,SAAS,aAAa,CAAE;IACxC,cAAc,WAAW,GAAG,OAAO,GAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAwDtC,CAAC;IACD,SAAS,IAAI,CAAC,WAAW,CAAE;AAE5B;AAEO,MAAM;IAEZ,aAAc;QAEb;QAEA,MAAM,YAAY,SAAS,aAAa,CAAE;QAC1C,UAAU,SAAS,CAAC,GAAG,CAAE;QAEzB,MAAM,eAAe,SAAS,aAAa,CAAE;QAC7C,aAAa,SAAS,CAAC,GAAG,CAAE;QAC5B,UAAU,WAAW,CAAE;QAEvB,MAAM,YAAY,SAAS,aAAa,CAAE;QAC1C,UAAU,SAAS,CAAC,GAAG,CAAE;QACzB,UAAU,WAAW,CAAE;QAEvB,MAAM,YAAY,SAAS,aAAa,CAAE;QAC1C,UAAU,SAAS,CAAC,GAAG,CAAE;QACzB,UAAU,WAAW,CAAE;QAEvB,MAAM,cAAc,SAAS,aAAa,CAAE;QAC5C,YAAY,SAAS,CAAC,GAAG,CAAE;QAC3B,UAAU,WAAW,CAAE;QAEvB,MAAM,gBAAgB,SAAS,aAAa,CAAE;QAC9C,cAAc,SAAS,CAAC,GAAG,CAAE;QAC7B,UAAU,WAAW,CAAE;QAEvB,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,UAAU,GAAG;QAElB,IAAI,CAAC,aAAa,CAAE;IAErB;IAEA,OAAQ,SAAS,EAAG;QAEnB,UAAU,WAAW,CAAE,IAAI,CAAC,UAAU;QACtC,UAAU,WAAW,CAAE,IAAI,CAAC,YAAY;IAEzC;IAEA,cAAe,IAAI,EAAG;QAErB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,EAAG,OAAO,IAAK,CAAC,CAAC;QAEhD,IAAK,SAAS,GAEb,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG;aAI7B,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,CAAC,EAAG,AAAE,CAAA,OAAO,GAAE,EAAI,OAAO,CAAE,GAAK,CAAC,CAAC;QAIjE,IAAK,QAAQ,GAEZ,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAE;aAIlC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAE;IAIjC;IAEA,WAAY,KAAK,EAAE,YAAY,KAAK,EAAG;QAEtC,IAAK,WAEJ,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG;aAI1B,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,CAAC,EAAG,KAAK,KAAK,CAAE,OAAS,QAAQ,CAAC;IAI9D;IAEA,WAAY,OAAO,EAAG;QAErB,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG;IAE3B;IAEA,eAAgB,WAAW,EAAG;QAE7B,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG;IAE/B;AAED","sources":["example/materialBall.js","example/utils/LoaderElement.js"],"sourcesContent":["import {\n\tACESFilmicToneMapping,\n\tCustomBlending,\n\tScene,\n\tWebGLRenderer,\n\tVector3,\n} from 'three';\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { DenoiseMaterial, WebGLPathTracer } from '../src/index.js';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { LoaderElement } from './utils/LoaderElement.js';\nimport { MaterialOrbSceneLoader } from './utils/MaterialOrbSceneLoader.js';\nimport { RectAreaLightUniformsLib } from 'three/examples/jsm/lights/RectAreaLightUniformsLib.js';\n\nconst CREDITS = 'Material orb model courtesy of USD Working Group';\n\nlet pathTracer, renderer, controls, denoiseQuad, material;\nlet camera, scene, loader;\n\nconst params = {\n\n\tmaterialProperties: {\n\t\tcolor: '#ffe6bd',\n\t\temissive: '#000000',\n\t\temissiveIntensity: 1,\n\t\troughness: 0,\n\t\tmetalness: 1,\n\t\tior: 1.495,\n\t\ttransmission: 0.0,\n\t\tthinFilm: false,\n\t\tattenuationColor: '#ffffff',\n\t\tattenuationDistance: 0.5,\n\t\topacity: 1.0,\n\t\tclearcoat: 0.0,\n\t\tclearcoatRoughness: 0.0,\n\t\tsheenColor: '#000000',\n\t\tsheenRoughness: 0.0,\n\t\tiridescence: 0.0,\n\t\tiridescenceIOR: 1.5,\n\t\tiridescenceThickness: 400,\n\t\tspecularColor: '#ffffff',\n\t\tspecularIntensity: 1.0,\n\t\tmatte: false,\n\t\tflatShading: false,\n\t\tcastShadow: true,\n\t},\n\n\tmultipleImportanceSampling: true,\n\tdenoiseEnabled: true,\n\tdenoiseSigma: 2.5,\n\tdenoiseThreshold: 0.1,\n\tdenoiseKSigma: 1.0,\n\tbounces: 5,\n\trenderScale: 1 / window.devicePixelRatio,\n\ttransmissiveBounces: 20,\n\tfilterGlossyFactor: 0.5,\n\ttiles: 3,\n};\n\nif ( window.location.hash.includes( 'transmission' ) ) {\n\n\tparams.materialProperties.metalness = 0.0;\n\tparams.materialProperties.roughness = 0.23;\n\tparams.materialProperties.transmission = 1.0;\n\tparams.materialProperties.color = '#ffffff';\n\n\tparams.bounces = 10;\n\tparams.tiles = 2;\n\n} else if ( window.location.hash.includes( 'iridescent' ) ) {\n\n\tparams.materialProperties.color = '#474747';\n\tparams.materialProperties.roughness = 0.25;\n\tparams.materialProperties.metalness = 1.0;\n\tparams.materialProperties.iridescence = 1.0;\n\tparams.materialProperties.iridescenceIOR = 2.2;\n\n} else if ( window.location.hash.includes( 'acrylic' ) ) {\n\n\tparams.materialProperties.color = '#ffffff';\n\tparams.materialProperties.roughness = 0;\n\tparams.materialProperties.metalness = 0;\n\tparams.materialProperties.transmission = 1.0;\n\tparams.materialProperties.attenuationDistance = 0.75;\n\tparams.materialProperties.attenuationColor = '#2a6dc6';\n\n\tparams.bounces = 20;\n\tparams.tiles = 3;\n\n}\n\n// adjust performance parameters for mobile\nconst aspectRatio = window.innerWidth / window.innerHeight;\nif ( aspectRatio < 0.65 ) {\n\n\tparams.bounces = Math.max( params.bounces, 6 );\n\tparams.renderScale *= 0.5;\n\tparams.tiles = 2;\n\tparams.multipleImportanceSampling = false;\n\n}\n\ninit();\n\nasync function init() {\n\n\tRectAreaLightUniformsLib.init();\n\n\tloader = new LoaderElement();\n\tloader.attach( document.body );\n\n\t// renderer\n\trenderer = new WebGLRenderer( { antialias: true } );\n\trenderer.toneMapping = ACESFilmicToneMapping;\n\trenderer.toneMappingExposure = 0.02;\n\tdocument.body.appendChild( renderer.domElement );\n\n\t// path tracer\n\tpathTracer = new WebGLPathTracer( renderer );\n\tpathTracer.tiles.set( params.tiles, params.tiles );\n\tpathTracer.textureSize.set( 2048, 2048 );\n\tpathTracer.renderToCanvasCallback = ( target, renderer, quad ) => {\n\n\t\tdenoiseQuad.material.sigma = params.denoiseSigma;\n\t\tdenoiseQuad.material.threshold = params.denoiseThreshold;\n\t\tdenoiseQuad.material.kSigma = params.denoiseKSigma;\n\t\tdenoiseQuad.material.opacity = quad.material.opacity;\n\n\t\tconst autoClear = renderer.autoClear;\n\t\tconst finalQuad = params.denoiseEnabled ? denoiseQuad : quad;\n\t\trenderer.autoClear = false;\n\t\tfinalQuad.material.map = target.texture;\n\t\tfinalQuad.render( renderer );\n\t\trenderer.autoClear = autoClear;\n\n\t};\n\n\t// denoiser\n\tdenoiseQuad = new FullScreenQuad( new DenoiseMaterial( {\n\t\tmap: null,\n\t\tblending: CustomBlending,\n\t\tpremultipliedAlpha: renderer.getContextAttributes().premultipliedAlpha,\n\t} ) );\n\n\tscene = new Scene();\n\n\twindow.SCENE = scene;\n\n\t// load assets\n\tconst orb = await new MaterialOrbSceneLoader().loadAsync();\n\n\t// scene initialization\n\tscene.add( orb.scene );\n\tcamera = orb.camera;\n\tmaterial = orb.material;\n\n\t// move camera to the scene\n\tscene.attach( camera );\n\tcamera.removeFromParent();\n\n\t// controls\n\tcontrols = new OrbitControls( camera, renderer.domElement );\n\tcontrols.addEventListener( 'change', () => pathTracer.updateCamera() );\n\n\t// shift target\n\tconst fwd = new Vector3( 0, 0, - 1 ).transformDirection( camera.matrixWorld ).normalize();\n\tcontrols.target.copy( camera.position ).addScaledVector( fwd, 25 );\n\tcontrols.update();\n\n\tloader.setPercentage( 1 );\n\tloader.setCredits( CREDITS );\n\n\tonParamsChange();\n\tonResize();\n\twindow.addEventListener( 'resize', onResize );\n\n\t// gui\n\tconst gui = new GUI();\n\tconst ptFolder = gui.addFolder( 'Path Tracer' );\n\tptFolder.add( params, 'multipleImportanceSampling' ).onChange( onParamsChange );\n\tptFolder.add( params, 'tiles', 1, 4, 1 ).onChange( value => {\n\n\t\tpathTracer.tiles.set( value, value );\n\n\t} );\n\tptFolder.add( params, 'filterGlossyFactor', 0, 1 ).onChange( onParamsChange );\n\tptFolder.add( params, 'bounces', 1, 30, 1 ).onChange( onParamsChange );\n\tptFolder.add( params, 'transmissiveBounces', 0, 40, 1 ).onChange( onParamsChange );\n\tptFolder.add( params, 'renderScale', 0.1, 1 ).onChange( onParamsChange );\n\n\tconst denoiseFolder = gui.addFolder( 'Denoising' );\n\tdenoiseFolder.add( params, 'denoiseEnabled' );\n\tdenoiseFolder.add( params, 'denoiseSigma', 0.01, 12.0 );\n\tdenoiseFolder.add( params, 'denoiseThreshold', 0.01, 1.0 );\n\tdenoiseFolder.add( params, 'denoiseKSigma', 0.0, 12.0 );\n\tdenoiseFolder.close();\n\n\tconst matFolder1 = gui.addFolder( 'Material' );\n\tmatFolder1.addColor( params.materialProperties, 'color' ).onChange( onParamsChange );\n\tmatFolder1.addColor( params.materialProperties, 'emissive' ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'emissiveIntensity', 0.0, 50.0, 0.01 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'roughness', 0, 1 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'metalness', 0, 1 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'opacity', 0, 1 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'transmission', 0, 1 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'thinFilm', 0, 1 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'attenuationDistance', 0.05, 2.0 ).onChange( onParamsChange );\n\tmatFolder1.addColor( params.materialProperties, 'attenuationColor' ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'ior', 0.9, 3.0 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'clearcoat', 0, 1 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'clearcoatRoughness', 0, 1 ).onChange( onParamsChange );\n\tmatFolder1.addColor( params.materialProperties, 'sheenColor' ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'sheenRoughness', 0, 1 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'iridescence', 0.0, 1.0 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'iridescenceIOR', 0.1, 3.0 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'iridescenceThickness', 0.0, 1200.0 ).onChange( onParamsChange );\n\tmatFolder1.addColor( params.materialProperties, 'specularColor' ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'specularIntensity', 0.0, 1.0 ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'matte' ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'flatShading' ).onChange( onParamsChange );\n\tmatFolder1.add( params.materialProperties, 'castShadow' ).onChange( onParamsChange );\n\tmatFolder1.close();\n\n\tanimate();\n\n}\n\nfunction onResize() {\n\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\tpathTracer.updateCamera();\n\n}\n\nfunction onParamsChange() {\n\n\tconst materialProperties = params.materialProperties;\n\tmaterial.color.set( materialProperties.color );\n\tmaterial.emissive.set( materialProperties.emissive );\n\tmaterial.emissiveIntensity = materialProperties.emissiveIntensity;\n\tmaterial.metalness = materialProperties.metalness;\n\tmaterial.roughness = materialProperties.roughness;\n\tmaterial.transmission = materialProperties.transmission;\n\tmaterial.attenuationDistance = materialProperties.thinFilm ? Infinity : materialProperties.attenuationDistance;\n\tmaterial.attenuationColor.set( materialProperties.attenuationColor );\n\tmaterial.ior = materialProperties.ior;\n\tmaterial.opacity = materialProperties.opacity;\n\tmaterial.clearcoat = materialProperties.clearcoat;\n\tmaterial.clearcoatRoughness = materialProperties.clearcoatRoughness;\n\tmaterial.sheenColor.set( materialProperties.sheenColor );\n\tmaterial.sheenRoughness = materialProperties.sheenRoughness;\n\tmaterial.iridescence = materialProperties.iridescence;\n\tmaterial.iridescenceIOR = materialProperties.iridescenceIOR;\n\tmaterial.iridescenceThicknessRange = [ 0, materialProperties.iridescenceThickness ];\n\tmaterial.specularColor.set( materialProperties.specularColor );\n\tmaterial.specularIntensity = materialProperties.specularIntensity;\n\tmaterial.transparent = material.opacity < 1;\n\tmaterial.flatShading = materialProperties.flatShading;\n\n\tpathTracer.transmissiveBounces = params.transmissiveBounces;\n\tpathTracer.multipleImportanceSampling = params.multipleImportanceSampling;\n\tpathTracer.filterGlossyFactor = params.filterGlossyFactor;\n\tpathTracer.bounces = params.bounces;\n\tpathTracer.renderScale = params.renderScale;\n\n\t// note: custom properties\n\tmaterial.matte = materialProperties.matte;\n\tmaterial.castShadow = materialProperties.castShadow;\n\n\tpathTracer.updateMaterials();\n\tpathTracer.setScene( scene, camera );\n\n}\n\nfunction animate() {\n\n\trequestAnimationFrame( animate );\n\tpathTracer.renderSample();\n\tloader.setSamples( pathTracer.samples, pathTracer.isCompiling );\n\n}\n","let _styleElement;\nfunction initializeStyles() {\n\n\tif ( _styleElement ) {\n\n\t\treturn;\n\n\t}\n\n\t_styleElement = document.createElement( 'style' );\n\t_styleElement.textContent = /* css */`\n\n\t\t.loader-container, .description {\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\tfont-family: 'Courier New', Courier, monospace;\n\t\t\tcolor: white;\n\t\t\tfont-weight: light;\n\t\t\talign-items: flex-start;\n\t\t\tfont-size: 14px;\n\t\t\tpointer-events: none;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t.loader-container {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tbottom: 0;\n\t\t}\n\n\t\t.description {\n\t\t\ttop: 0;\n\t\t\twidth: 100%;\n\t\t\ttext-align: center;\n\t\t\tpadding: 5px 0;\n\t\t}\n\n\t\t.loader-container .bar {\n\t\t\theight: 2px;\n\t\t\tbackground: white;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t.loader-container .credits,\n\t\t.loader-container .samples,\n\t\t.loader-container .percentage {\n\t\t\tpadding: 5px;\n\t\t\tmargin: 0 0 1px 1px;\n\t\t\tbackground: rgba( 0, 0, 0, 0.2 );\n\t\t\tborder-radius: 2px;\n\t\t\tdisplay: inline-block;\n\t\t}\n\n\t\t.loader-container:not(.loading) .bar,\n\t\t.loader-container:not(.loading) .percentage,\n\t\t.loader-container.loading .credits,\n\t\t.loader-container.loading .samples,\n\t\t.loader-container .credits:empty {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.loader-container .credits a,\n\t\t.loader-container .credits,\n\t\t.loader-container .samples {\n\t\t\tcolor: rgba( 255, 255, 255, 0.75 );\n\t\t}\n\t`;\n\tdocument.head.appendChild( _styleElement );\n\n}\n\nexport class LoaderElement {\n\n\tconstructor() {\n\n\t\tinitializeStyles();\n\n\t\tconst container = document.createElement( 'div' );\n\t\tcontainer.classList.add( 'loader-container' );\n\n\t\tconst percentageEl = document.createElement( 'div' );\n\t\tpercentageEl.classList.add( 'percentage' );\n\t\tcontainer.appendChild( percentageEl );\n\n\t\tconst samplesEl = document.createElement( 'div' );\n\t\tsamplesEl.classList.add( 'samples' );\n\t\tcontainer.appendChild( samplesEl );\n\n\t\tconst creditsEl = document.createElement( 'div' );\n\t\tcreditsEl.classList.add( 'credits' );\n\t\tcontainer.appendChild( creditsEl );\n\n\t\tconst loaderBarEl = document.createElement( 'div' );\n\t\tloaderBarEl.classList.add( 'bar' );\n\t\tcontainer.appendChild( loaderBarEl );\n\n\t\tconst descriptionEl = document.createElement( 'div' );\n\t\tdescriptionEl.classList.add( 'description' );\n\t\tcontainer.appendChild( descriptionEl );\n\n\t\tthis._description = descriptionEl;\n\t\tthis._loaderBar = loaderBarEl;\n\t\tthis._percentage = percentageEl;\n\t\tthis._credits = creditsEl;\n\t\tthis._samples = samplesEl;\n\t\tthis._container = container;\n\n\t\tthis.setPercentage( 0 );\n\n\t}\n\n\tattach( container ) {\n\n\t\tcontainer.appendChild( this._container );\n\t\tcontainer.appendChild( this._description );\n\n\t}\n\n\tsetPercentage( perc ) {\n\n\t\tthis._loaderBar.style.width = `${ perc * 100 }%`;\n\n\t\tif ( perc === 0 ) {\n\n\t\t\tthis._percentage.innerText = 'Loading...';\n\n\t\t} else {\n\n\t\t\tthis._percentage.innerText = `${ ( perc * 100 ).toFixed( 0 ) }%`;\n\n\t\t}\n\n\t\tif ( perc >= 1 ) {\n\n\t\t\tthis._container.classList.remove( 'loading' );\n\n\t\t} else {\n\n\t\t\tthis._container.classList.add( 'loading' );\n\n\t\t}\n\n\t}\n\n\tsetSamples( count, compiling = false ) {\n\n\t\tif ( compiling ) {\n\n\t\t\tthis._samples.innerText = 'compiling shader...';\n\n\t\t} else {\n\n\t\t\tthis._samples.innerText = `${ Math.floor( count ) } samples`;\n\n\t\t}\n\n\t}\n\n\tsetCredits( credits ) {\n\n\t\tthis._credits.innerHTML = credits;\n\n\t}\n\n\tsetDescription( description ) {\n\n\t\tthis._description.innerHTML = description;\n\n\t}\n\n}\n"],"names":[],"version":3,"file":"materialBall.f600b5ee.js.map","sourceRoot":"/__parcel_source_root/"}